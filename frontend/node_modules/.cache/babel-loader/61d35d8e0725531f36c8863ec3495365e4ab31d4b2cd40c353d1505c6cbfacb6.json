{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport api from '@/services/api';\nexport default {\n  mounted() {\n    document.title = \"Roles | TaskMaster Pro\";\n    this.getRole();\n  },\n  data() {\n    return {\n      searchQuery: '',\n      roles: []\n    };\n  },\n  computed: {\n    filteredRoles() {\n      return this.roles.filter(role => role.nombre.toLowerCase().includes(this.searchQuery.toLowerCase()));\n    }\n  },\n  methods: {\n    async getRole() {\n      try {\n        const response = await api.get('/role');\n        this.roles = response.data.data;\n        console.log(response.data);\n      } catch (error) {\n        if (error.response && error.response.data) {\n          const serverErrors = error.response.data;\n          if (serverErrors.message === 'Error fetching roles: ') {\n            console.log(serverErrors.message);\n            alert(serverErrors.message);\n          } else {\n            console.log('Ocurrio un error inesperado del lado del servidor: ', serverErrors);\n            alert('Ocurrio un error inesperado del lado del servidor, revisa la consola para obtener más detalles');\n          }\n        }\n      }\n    },\n    redirectToCreateRole() {\n      this.$router.push('crear-rol');\n    },\n    redirectToAssignRole() {\n      this.$router.push('/asignarRol');\n    },\n    redirectToEditRole(roleId) {\n      this.$router.push({\n        name: 'EditarRol',\n        params: {\n          id: roleId\n        }\n      });\n    },\n    async deleteRole(roleId) {\n      try {\n        if (confirm('¿Estás seguro que deseas eliminar el rol?')) {\n          await api.delete(`/role/${roleId}}`);\n          this.roles = this.roles.filter(role => role.id !== roleId);\n          alert('Rol eliminado con exito');\n        }\n      } catch (error) {\n        console.log('Error eliminado el rol: ', error);\n        alert('Hubo un problema');\n      }\n    }\n  }\n};","map":{"version":3,"names":["api","mounted","document","title","getRole","data","searchQuery","roles","computed","filteredRoles","filter","role","nombre","toLowerCase","includes","methods","response","get","console","log","error","serverErrors","message","alert","redirectToCreateRole","$router","push","redirectToAssignRole","redirectToEditRole","roleId","name","params","id","deleteRole","confirm","delete"],"sources":["C:\\xampp\\htdocs\\TaskMasterPro\\trim03\\04_prototipo_funcional\\TaskMaster_Pro\\frontend\\src\\components\\administrarRoles.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg-custom\">\r\n    <!-- Navbar for mobile -->\r\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light d-lg-none\">\r\n      <div class=\"container-fluid\">\r\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#offcanvasMenu\"\r\n          aria-controls=\"offcanvasMenu\">\r\n          <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <a class=\"navbar-brand\" href=\"#\">Menú</a>\r\n      </div>\r\n    </nav>\r\n\r\n    <!-- Offcanvas for mobile menu -->\r\n    <div class=\"offcanvas offcanvas-start\" tabindex=\"-1\" id=\"offcanvasMenu\" aria-labelledby=\"offcanvasMenuLabel\">\r\n      <div class=\"offcanvas-header\">\r\n        <h5 class=\"offcanvas-title\" id=\"offcanvasMenuLabel\">Menú</h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"offcanvas-body\">\r\n        <ul class=\"nav flex-column\">\r\n          <!-- Usamos router-link para redirigir en Vue -->\r\n          <li class=\"nav-item\">\r\n            <router-link to=\"/perfil-completo\" class=\"nav-link mi-link\">\r\n              <i class=\"fa-solid fa-home me-1\"></i> Inicio\r\n            </router-link>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <router-link to=\"/administrar-roles\" class=\"nav-link mi-link\">\r\n              <i class=\"fa-solid fa-user-cog me-1\"></i> Roles\r\n            </router-link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <!-- Sidebar for larger screens -->\r\n        <div class=\"col-md-3 custom-col d-none d-lg-block\">\r\n          <img src=\"../assets/img/logos/logotipo.png\" class=\"logo-inicio\" width=\"300\">\r\n          <ul class=\"nav flex-column\">\r\n            <!-- Usamos router-link para redirigir en Vue -->\r\n            <li class=\"nav-item\">\r\n              <router-link to=\"/perfil-completo\" class=\"nav-link mi-link\">\r\n                <i class=\"fa-solid fa-home me-1\"></i> Inicio\r\n              </router-link>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <router-link to=\"/administrar-roles\" class=\"nav-link mi-link\">\r\n                <i class=\"fa-solid fa-user-cog me-1\"></i> Roles\r\n              </router-link>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"col custom-col-main\">\r\n          <header>\r\n            <div class=\"header d-flex justify-content-end align-items-center p-3\">\r\n              <div class=\"d-flex align-items-center\">\r\n                <span>Administrador</span>\r\n                <a href=\"perfil.html\" class=\"ms-3\">\r\n                  <img src=\"../assets/img/mariposa34.jpg\" alt=\"Perfil\" class=\"rounded-circle\" width=\"40\">\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </header>\r\n\r\n          <section class=\"container-fluid mt-4\">\r\n            <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n              <div class=\"d-flex align-items-center\">\r\n                <h2>Roles</h2>\r\n                <button class=\"btn btn-success ms-3\" @click=\"redirectToCreateRole\"><i\r\n                    class=\"fa-solid fa-plus me-1\"></i></button>\r\n              </div>\r\n              <div class=\"d-flex align-items-center\">\r\n                <input v-model=\"searchQuery\" type=\"text\" class=\"form-control\" placeholder=\"Buscar Roles\">\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Table responsive container -->\r\n            <div class=\"table-responsive\">\r\n              <table class=\"table table-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Nombre</th>\r\n                    <th>Descripción</th>\r\n                    <th>Acciones</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(role) in filteredRoles\" :key=\"role.id\">\r\n                    <td>\r\n                      <input type=\"radio\" @click=\"redirectToEditRole\" v-model=\"selectedRole\" :value=\"role.nombre\"> {{ role.nombre }}\r\n                    </td>\r\n                    <td class=\"description\">{{ role.descripcion }}</td>\r\n                    <td>\r\n                      <button class=\"btn btn-sm btn-secondary buton-form\" @click=\"redirectToAssignRole\"><i\r\n                          class=\"fa-solid fa-user-plus\"></i></button>\r\n                      <button class=\"btn btn-sm btn-secondary\" @click=\"redirectToEditRole(role.id)\"><i\r\n                          class=\"fa-solid fa-pen\"></i></button>\r\n                      <button class=\"btn btn-sm btn-danger btn-eliminar\" @click=\"deleteRole(role.id)\"><i\r\n                          class=\"fa-solid fa-trash\"></i></button>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/services/api';\r\nexport default {\r\n  mounted() {\r\n    document.title = \"Roles | TaskMaster Pro\";\r\n    this.getRole();\r\n  },\r\n  data() {\r\n    return {\r\n      searchQuery: '',\r\n      roles: []\r\n    };\r\n  },\r\n  computed: {\r\n    filteredRoles() {\r\n      return this.roles.filter(role => role.nombre.toLowerCase().includes(this.searchQuery.toLowerCase()));\r\n    }\r\n  },\r\n  methods: {\r\n    async getRole() {\r\n      try {\r\n        const response = await api.get('/role');\r\n        this.roles = response.data.data;\r\n        console.log(response.data);\r\n      } catch (error) {\r\n        if(error.response && error.response.data){\r\n          const serverErrors = error.response.data;\r\n          if(serverErrors.message === 'Error fetching roles: ' ){\r\n            console.log(serverErrors.message);\r\n            alert(serverErrors.message);\r\n          } else {\r\n            console.log('Ocurrio un error inesperado del lado del servidor: ', serverErrors);\r\n            alert('Ocurrio un error inesperado del lado del servidor, revisa la consola para obtener más detalles');\r\n          }\r\n        }\r\n      }\r\n    },\r\n    redirectToCreateRole() {\r\n      this.$router.push('crear-rol');\r\n    },\r\n    redirectToAssignRole() {\r\n      this.$router.push('/asignarRol');\r\n    },\r\n    redirectToEditRole(roleId) {\r\n      this.$router.push({ name: 'EditarRol', params: { id: roleId }});\r\n    },\r\n    async deleteRole(roleId) {\r\n      try {\r\n        if (confirm('¿Estás seguro que deseas eliminar el rol?')) {\r\n        await api.delete(`/role/${roleId}}`);\r\n        this.roles = this.roles.filter(role => role.id !== roleId);\r\n        alert('Rol eliminado con exito');\r\n      }\r\n      } catch (error) {\r\n        console.log('Error eliminado el rol: ', error);\r\n        alert('Hubo un problema');\r\n      }\r\n      \r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n@import \"@/../../assets/css/misTareas.css\";\r\n</style>\r\n"],"mappings":";;;AAoHA,OAAOA,GAAE,MAAO,gBAAgB;AAChC,eAAe;EACbC,OAAOA,CAAA,EAAG;IACRC,QAAQ,CAACC,KAAI,GAAI,wBAAwB;IACzC,IAAI,CAACC,OAAO,CAAC,CAAC;EAChB,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,aAAaA,CAAA,EAAG;MACd,OAAO,IAAI,CAACF,KAAK,CAACG,MAAM,CAACC,IAAG,IAAKA,IAAI,CAACC,MAAM,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACR,WAAW,CAACO,WAAW,CAAC,CAAC,CAAC,CAAC;IACtG;EACF,CAAC;EACDE,OAAO,EAAE;IACP,MAAMX,OAAOA,CAAA,EAAG;MACd,IAAI;QACF,MAAMY,QAAO,GAAI,MAAMhB,GAAG,CAACiB,GAAG,CAAC,OAAO,CAAC;QACvC,IAAI,CAACV,KAAI,GAAIS,QAAQ,CAACX,IAAI,CAACA,IAAI;QAC/Ba,OAAO,CAACC,GAAG,CAACH,QAAQ,CAACX,IAAI,CAAC;MAC5B,EAAE,OAAOe,KAAK,EAAE;QACd,IAAGA,KAAK,CAACJ,QAAO,IAAKI,KAAK,CAACJ,QAAQ,CAACX,IAAI,EAAC;UACvC,MAAMgB,YAAW,GAAID,KAAK,CAACJ,QAAQ,CAACX,IAAI;UACxC,IAAGgB,YAAY,CAACC,OAAM,KAAM,wBAAuB,EAAG;YACpDJ,OAAO,CAACC,GAAG,CAACE,YAAY,CAACC,OAAO,CAAC;YACjCC,KAAK,CAACF,YAAY,CAACC,OAAO,CAAC;UAC7B,OAAO;YACLJ,OAAO,CAACC,GAAG,CAAC,qDAAqD,EAAEE,YAAY,CAAC;YAChFE,KAAK,CAAC,gGAAgG,CAAC;UACzG;QACF;MACF;IACF,CAAC;IACDC,oBAAoBA,CAAA,EAAG;MACrB,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC;IAChC,CAAC;IACDC,oBAAoBA,CAAA,EAAG;MACrB,IAAI,CAACF,OAAO,CAACC,IAAI,CAAC,aAAa,CAAC;IAClC,CAAC;IACDE,kBAAkBA,CAACC,MAAM,EAAE;MACzB,IAAI,CAACJ,OAAO,CAACC,IAAI,CAAC;QAAEI,IAAI,EAAE,WAAW;QAAEC,MAAM,EAAE;UAAEC,EAAE,EAAEH;QAAO;MAAC,CAAC,CAAC;IACjE,CAAC;IACD,MAAMI,UAAUA,CAACJ,MAAM,EAAE;MACvB,IAAI;QACF,IAAIK,OAAO,CAAC,2CAA2C,CAAC,EAAE;UAC1D,MAAMlC,GAAG,CAACmC,MAAM,CAAC,SAASN,MAAM,GAAG,CAAC;UACpC,IAAI,CAACtB,KAAI,GAAI,IAAI,CAACA,KAAK,CAACG,MAAM,CAACC,IAAG,IAAKA,IAAI,CAACqB,EAAC,KAAMH,MAAM,CAAC;UAC1DN,KAAK,CAAC,yBAAyB,CAAC;QAClC;MACA,EAAE,OAAOH,KAAK,EAAE;QACdF,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEC,KAAK,CAAC;QAC9CG,KAAK,CAAC,kBAAkB,CAAC;MAC3B;IAEF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}